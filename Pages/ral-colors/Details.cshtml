@page "/ral-colors/{colorIdentifier}"
@using Microsoft.AspNetCore.Mvc.Localization
@using protabula_com.Models
@using protabula_com.Helpers
@using System.Globalization
@model RalColorDetailsModel
@inject IViewLocalizer Localizer
@{
    var colorTitle = string.IsNullOrEmpty(Model.Color.Name)
    ? $"RAL {Model.Color.Number}"
    : $"RAL {Model.Color.Number} {Model.Color.Name}";

    // SEO-optimized title
    ViewData["Title"] = $"{colorTitle} - {Localizer["TitleSuffix"].Value}";

    // Meta description using ColorFormats
    var rgb = Model.Formats?.Rgb ?? (byte.MinValue, byte.MinValue, byte.MinValue);
    var cmyk = Model.Formats?.Cmyk ?? (0, 0, 0, 0);
    ViewData["MetaDescription"] = string.IsNullOrEmpty(Model.Color.Name)
    ? Localizer["MetaDescriptionBasic", Model.Color.Number, Model.Color.Hex, rgb.R, rgb.G, rgb.B, cmyk.C, cmyk.M, cmyk.Y,
    cmyk.K].Value
    : Localizer["MetaDescriptionWithName", Model.Color.Number, Model.Color.Name, Model.Color.Hex, rgb.R, rgb.G, rgb.B,
    cmyk.C, cmyk.M, cmyk.Y, cmyk.K].Value;

    // For structured data
    var currentCulture = CultureInfo.CurrentUICulture.Name;
    var request = ViewContext.HttpContext.Request;
    var baseUrl = $"{request.Scheme}://{request.Host}";
    var currentUrl = $"{baseUrl}/{currentCulture}/ral-colors/{Model.Color.Slug}";

    // Breadcrumbs - include category
    var categorySlug = Model.Color.Category switch
    {
        RalCategory.Classic => "classic",
        RalCategory.DesignPlus => "design-plus",
        RalCategory.Effect => "effect",
        _ => "classic"
    };
    var categoryName = Localizer[$"Category{Model.Color.Category}"].Value;

    ViewData["Breadcrumbs"] = new List<(string, string?, object?)>
{
(Localizer["BreadcrumbColors"].Value, "/ral-colors/Index", new Dictionary<string, string> { ["culture"] = currentCulture
}),
(categoryName, "/ral-colors/Category", new Dictionary<string, string> { ["culture"] = currentCulture, ["category"] =
categorySlug }),
(colorTitle, null, null)
};

    // OG Image for social sharing
    ViewData["OgImage"] = $"{baseUrl}/images/ral-colors/{Model.Color.Slug}.jpg";
}

@section Head {
    <link rel="stylesheet" href="~/css/details-page.css" asp-append-version="true" />
    <script type="application/ld+json">
                {
                    "@@context": "https://schema.org",
                    "@@type": "BreadcrumbList",
                    "itemListElement": [
                        {
                            "@@type": "ListItem",
                            "position": 1,
                            "name": "@Localizer["BreadcrumbHome"].Value",
                            "item": "@baseUrl/@currentCulture"
                        },
                        {
                            "@@type": "ListItem",
                            "position": 2,
                            "name": "@Localizer["BreadcrumbColors"].Value",
                            "item": "@baseUrl/@currentCulture/ral-colors"
                        },
                        {
                            "@@type": "ListItem",
                            "position": 3,
                            "name": "@colorTitle"
                        }
                    ]
                }
                </script>
}


<h1>@colorTitle</h1>

@{
    var lrvLevel = ColorMath.ClassifyLrv(Model.Formats?.Lrv ?? 0);
    var undertoneStr = Model.Formats?.Undertone.Secondary != SecondaryUndertone.None
    ? Localizer["DescUndertone",
    Localizer[$"Undertone{Model.Formats?.Undertone.Strength}"].Value,
    Localizer[$"UndertoneSecondary{Model.Formats?.Undertone.Secondary}"].Value].Value
    : "";
    var categoryStr = Localizer[$"DescCategory{Model.Color.Category}"].Value;
    var lrvStr = Localizer[$"DescLrv{lrvLevel}"].Value;
    var temperatureStr = Localizer[Model.Temperature.Classification].Value.ToLowerInvariant();
    var rootColorStr = Localizer[$"RootColor{Model.Color.RootColor}"].Value;
}

<p class="color-description">
    @if (!string.IsNullOrEmpty(Model.Color.Name))
    {
        @Localizer["DescWithName",
        Model.Color.Number,
        Model.Color.Name,
        temperatureStr,
        rootColorStr,
        undertoneStr,
        categoryStr,
        lrvStr,
        Model.Color.Hex,
        rgb.R,
        rgb.G,
        rgb.B]
        }
    else
    {
        @Localizer["DescNoName",
        Model.Color.Number,
        temperatureStr,
        rootColorStr,
        undertoneStr,
        categoryStr,
        lrvStr,
        Model.Color.Hex,
        rgb.R,
        rgb.G,
        rgb.B]
        }
</p>

@{
    var colorTileModel = new ColorTileModel(
    Model.Color.Hex,
    UndertoneHex: Model.Formats?.UndertoneHex,
    Strength: Model.Formats?.Undertone.Strength ?? UndertoneStrength.None,
    OnClick: "DetailsPage.openColorPreview()",
    ClickHint: Localizer["ClickToPreview"].Value,
    NeedsDarkText: Model.Color.NeedsDarkText);
    var hue = Model.Formats?.Hsl.H ?? 0;
    var saturation = Model.Formats?.Hsl.S ?? 0;
    var lrv = Model.Formats?.Lrv ?? 0;
}

<div class="color-hero">
    <div class="color-hero-preview">
        <partial name="Shared/_ColorTile" model="colorTileModel" />
    </div>
    <div class="color-hero-sidebar">
        <div class="sidebar-card">
            <span class="property-label">
                <span class="metric-header">
                    @Localizer["UndertoneIntro"]
                    @{
                        var undertoneTip = Localizer["UndertoneTip"].Value;
                    }
                    <partial name="Shared/_InfoTooltip" model="@(undertoneTip, (string ?)null)" />
                </span>
            </span>
            @if (Model.Formats?.Undertone.Secondary != SecondaryUndertone.None)
            {
                <div class="undertone-swatches">
                    <div class="undertone-swatch-pair">
                        <span class="undertone-swatch-color" style="background-color: @Model.Color.Hex;"></span>
                        <span class="undertone-swatch-arrow">→</span>
                        <span class="undertone-swatch-color" style="background-color: @Model.Formats?.UndertoneHex;"></span>
                    </div>
                </div>
                <span class="property-value">@Model.Formats?.UndertoneDescription</span>
            }
            else
            {
                <span class="property-value">@Localizer["UndertoneNeutral"]</span>
            }
        </div>
        <div class="sidebar-card">
            <span class="property-label">
                <span class="metric-header">
                    @Localizer["PropTemperature"]
                    @{
                        var temperatureTip = Localizer["TemperatureTip"].Value;
                    }
                    <partial name="Shared/_InfoTooltip" model="@(temperatureTip, (string ?)null)" />
                </span>
            </span>
            <partial name="Shared/_TemperatureBadge"
                model="new TemperatureBadgeModel(Model.Temperature.Kelvin, Model.Temperature.Classification)" />
        </div>
        <div class="sidebar-card">
            <span class="property-label">
                <span class="metric-header">
                    @Localizer["PropHue"]
                    @{
                        var hueTip = Localizer["HueTip"].Value;
                    }
                    <partial name="Shared/_InfoTooltip" model="@(hueTip, (string ?)null)" />
                </span>
            </span>
            <partial name="Shared/_HueDiagram" model="hue" />
        </div>
        <div class="sidebar-card">
            <span class="property-label">
                <span class="metric-header">
                    @Localizer["PropSaturation"]
                    @{
                        var saturationTip = Localizer["SaturationTip"].Value;
                    }
                    <partial name="Shared/_InfoTooltip" model="@(saturationTip, (string ?)null)" />
                </span>
            </span>
            <partial name="Shared/_SaturationBar" model="new SaturationBarModel(hue, saturation)" />
        </div>
        <div class="sidebar-card">
            <span class="property-label">
                <span class="metric-header">
                    @Localizer["PropLrv"]
                    @{
                        var lrvTip = Localizer["LrvTip"].Value;
                    }
                    <partial name="Shared/_InfoTooltip" model="@(lrvTip, (string ?)null)" />
                </span>
            </span>
            <partial name="Shared/_LrvBar" model="new LrvBarModel(lrv)" />
        </div>
        <div class="sidebar-card">
            <span class="property-label">@Localizer["LabelHex", ""]</span>
            <span class="property-value">@Model.Color.Hex</span>
        </div>
    </div>
</div>

<section class="specular-preview-section mt-2xl">
    <h2>@Localizer["SpecularPreview", Model.Color.Number]</h2>
    <p class="text-secondary text-sm"><em>@Localizer["SpecularDisclaimer"]</em></p>

    <div class="specular-preview-container">
        <div id="ral-preview-canvas" class="ral-preview-canvas" role="img"
            aria-label="@Localizer["SpecularPreview", Model.Color.Number]" data-color-hex="@Model.Color.Hex"
            data-color-lrv="@(Model.Formats?.Lrv ?? 50)" data-undertone-hex="@(Model.Formats?.UndertoneHex ?? "")"
            data-undertone-strength="@(((int)(Model.Formats?.Undertone.Strength ?? UndertoneStrength.None)) / 4.0)">
        </div>

        <div class="specular-controls">
            <div class="control-group">
                <label>@Localizer["FinishLabel"]</label>
                <div class="btn-group btn-group-sm">
                    <button type="button" class="btn btn-secondary btn-icon" data-finish="matte"
                        title="@Localizer["FinishMatte"]">
                        <svg viewBox="0 0 24 24" fill="currentColor">
                            <circle cx="12" cy="12" r="8" opacity="0.6" />
                        </svg>
                        <span>@Localizer["FinishMatte"]</span>
                    </button>
                    <button type="button" class="btn btn-secondary btn-icon active" data-finish="satin"
                        title="@Localizer["FinishSatin"]">
                        <svg viewBox="0 0 24 24" fill="currentColor">
                            <circle cx="12" cy="12" r="8" />
                            <ellipse cx="9" cy="9" rx="3" ry="2" fill="white" opacity="0.3" />
                        </svg>
                        <span>@Localizer["FinishSatin"]</span>
                    </button>
                    <button type="button" class="btn btn-secondary btn-icon" data-finish="gloss"
                        title="@Localizer["FinishGloss"]">
                        <svg viewBox="0 0 24 24" fill="currentColor">
                            <circle cx="12" cy="12" r="8" />
                            <ellipse cx="9" cy="9" rx="4" ry="3" fill="white" opacity="0.5" />
                        </svg>
                        <span>@Localizer["FinishGloss"]</span>
                    </button>
                </div>
            </div>
            <div class="control-group">
                <label>@Localizer["ModelLabel"]</label>
                <div class="btn-group btn-group-sm">
                    <button type="button" class="btn btn-secondary btn-icon active" data-model="sphere"
                        title="@Localizer["ModelSphere"]">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                            <circle cx="12" cy="12" r="9" />
                            <ellipse cx="12" cy="12" rx="9" ry="4" />
                            <path d="M12 3v18" />
                        </svg>
                        <span>@Localizer["ModelSphere"]</span>
                    </button>
                    <button type="button" class="btn btn-secondary btn-icon" data-model="bent-panel"
                        title="@Localizer["ModelBentPanel"]">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                            <path d="M3 16h12a2 2 0 0 0 2-2V6" />
                            <path d="M3 18h12a4 4 0 0 0 4-4V4" />
                        </svg>
                        <span>@Localizer["ModelBentPanel"]</span>
                    </button>
                    <button type="button" class="btn btn-secondary btn-icon" data-model="curved-sample"
                        title="@Localizer["ModelCurvedSample"]">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                            <path d="M3 17c3-8 6 8 9 0s6 8 9 0" />
                        </svg>
                        <span>@Localizer["ModelCurvedSample"]</span>
                    </button>
                    <button type="button" class="btn btn-secondary btn-icon" data-model="window-frame"
                        title="@Localizer["ModelWindow"]">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                            <rect x="3" y="3" width="18" height="18" rx="1" />
                            <line x1="12" y1="3" x2="12" y2="21" />
                            <line x1="3" y1="12" x2="21" y2="12" />
                        </svg>
                        <span>@Localizer["ModelWindow"]</span>
                    </button>
                    <button type="button" class="btn btn-secondary btn-icon" data-model="door"
                        title="@Localizer["ModelDoor"]">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                            <rect x="4" y="2" width="16" height="20" rx="1" />
                            <circle cx="16" cy="12" r="1.5" fill="currentColor" />
                        </svg>
                        <span>@Localizer["ModelDoor"]</span>
                    </button>
                </div>
            </div>
            <div class="control-group">
                <label>@Localizer["LightingLabel"]</label>
                <div class="btn-group btn-group-sm">
                    <button type="button" class="btn btn-secondary btn-icon active" data-lighting="studio"
                        title="@Localizer["LightingStudio"]">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                            <path
                                d="M9 18h6M10 22h4M12 2v1M4.22 4.22l.7.7M1 12h1M4.22 19.78l.7-.7M22 12h1M19.08 4.92l-.7.7M19.08 19.08l-.7-.7" />
                            <circle cx="12" cy="12" r="5" />
                        </svg>
                        <span>@Localizer["LightingStudio"]</span>
                    </button>
                    <button type="button" class="btn btn-secondary btn-icon" data-lighting="morning"
                        title="@Localizer["LightingMorning"]">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                            <path
                                d="M12 2v3M4.22 4.22l2.12 2.12M1 12h3M4.22 19.78l2.12-2.12M12 19v3M17.66 17.66l2.12 2.12M20 12h3M17.66 6.34l2.12-2.12" />
                            <circle cx="12" cy="12" r="4" fill="#ffd1a3" />
                        </svg>
                        <span>@Localizer["LightingMorning"]</span>
                    </button>
                    <button type="button" class="btn btn-secondary btn-icon" data-lighting="midday"
                        title="@Localizer["LightingMidday"]">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                            <circle cx="12" cy="12" r="5" fill="#fff4e5" />
                            <path
                                d="M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42" />
                        </svg>
                        <span>@Localizer["LightingMidday"]</span>
                    </button>
                    <button type="button" class="btn btn-secondary btn-icon" data-lighting="golden"
                        title="@Localizer["LightingGolden"]">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                            <path d="M2 18h20" />
                            <circle cx="12" cy="14" r="5" fill="#ffb46b" />
                            <path d="M12 3v3M5.64 7.64l2.12 2.12M3 14h3M18.36 7.64l-2.12 2.12M18 14h3" />
                        </svg>
                        <span>@Localizer["LightingGolden"]</span>
                    </button>
                    <button type="button" class="btn btn-secondary btn-icon" data-lighting="overcast"
                        title="@Localizer["LightingOvercast"]">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                            <path d="M18 10a4 4 0 00-8 0 3 3 0 00-3 3 3 3 0 003 3h8a3 3 0 003-3 3 3 0 00-3-3z"
                                fill="#ddeeff" />
                        </svg>
                        <span>@Localizer["LightingOvercast"]</span>
                    </button>
                    <button type="button" class="btn btn-secondary btn-icon" data-lighting="night"
                        title="@Localizer["LightingNight"]">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                            <path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z" fill="#334466" />
                        </svg>
                        <span>@Localizer["LightingNight"]</span>
                    </button>
                </div>
            </div>
        </div>
    </div>
</section>

<section class="scene-preview-section mt-2xl">
    <h2>@Localizer["ScenePreview", Model.Color.Number]</h2>
    <p class="text-secondary text-sm"><em>@Localizer["SceneDisclaimer"]</em></p>
    <div class="scene-grid">
        <figure class="scene-preview">
            <a href="/images/ral-scenes/@(Model.Color.Slug)-window.jpg" target="_blank" class="scene-image-wrapper"
                style="background-color: @Model.Color.Hex;">
                <img src="/images/ral-scenes/@(Model.Color.Slug)-window.jpg"
                    alt="@Localizer["SceneWindowAlt", Model.Color.Number, Model.Color.Name ?? ""]" class="scene-image"
                    loading="lazy" />
            </a>
            <figcaption>@Localizer["SceneWindow", Model.Color.Number]</figcaption>
        </figure>
        <figure class="scene-preview">
            <a href="/images/ral-scenes/@(Model.Color.Slug)-front-door.jpg" target="_blank" class="scene-image-wrapper"
                style="background-color: @Model.Color.Hex;">
                <img src="/images/ral-scenes/@(Model.Color.Slug)-front-door.jpg"
                    alt="@Localizer["SceneFrontDoorAlt", Model.Color.Number, Model.Color.Name ?? ""]"
                    class="scene-image" loading="lazy" />
            </a>
            <figcaption>@Localizer["SceneFrontDoor", Model.Color.Number]</figcaption>
        </figure>
        <figure class="scene-preview">
            <a href="/images/ral-scenes/@(Model.Color.Slug)-entrance.jpg" target="_blank" class="scene-image-wrapper"
                style="background-color: @Model.Color.Hex;">
                <img src="/images/ral-scenes/@(Model.Color.Slug)-entrance.jpg"
                    alt="@Localizer["SceneEntranceAlt", Model.Color.Number, Model.Color.Name ?? ""]" class="scene-image"
                    loading="lazy" />
            </a>
            <figcaption>@Localizer["SceneEntrance", Model.Color.Number]</figcaption>
        </figure>
        <figure class="scene-preview">
            <a href="/images/ral-scenes/@(Model.Color.Slug)-balcony.jpg" target="_blank" class="scene-image-wrapper"
                style="background-color: @Model.Color.Hex;">
                <img src="/images/ral-scenes/@(Model.Color.Slug)-balcony.jpg"
                    alt="@Localizer["SceneBalconyAlt", Model.Color.Number, Model.Color.Name ?? ""]" class="scene-image"
                    loading="lazy" />
            </a>
            <figcaption>@Localizer["SceneBalcony", Model.Color.Number]</figcaption>
        </figure>
        <figure class="scene-preview">
            <a href="/images/ral-scenes/@(Model.Color.Slug)-window-frame-detail.jpg" target="_blank"
                class="scene-image-wrapper" style="background-color: @Model.Color.Hex;">
                <img src="/images/ral-scenes/@(Model.Color.Slug)-window-frame-detail.jpg"
                    alt="@Localizer["SceneWindowFrameDetailAlt", Model.Color.Number, Model.Color.Name ?? ""]"
                    class="scene-image" loading="lazy" />
            </a>
            <figcaption>@Localizer["SceneWindowFrameDetail", Model.Color.Number]</figcaption>
        </figure>
    </div>
</section>

<section class="lighting-preview-section mt-2xl">
    <h2>@Localizer["LightingPreview", Model.Color.Number, Model.Color.Name ?? ""]</h2>
    <p class="text-secondary">@Localizer["LightingPreviewDesc"]</p>
    @{
        var gradientStops = string.Join(", ", Model.LightingVariations.Select((v, i) =>
        $"{v.Hex} {i * 100 / (Model.LightingVariations.Count - 1)}%"));
    }
    <div class="lighting-gradient-container">
        <div class="lighting-gradient" style="background: linear-gradient(to right, @gradientStops);"></div>
        <div class="lighting-labels">
            @foreach (var variation in Model.LightingVariations)
            {
                <div class="lighting-label-item">
                    <span class="lighting-time">@variation.Hour:00</span>
                </div>
            }
        </div>
    </div>
</section>

<section class="direct-sunlight-section mt-2xl">
    <h2>@Localizer["DirectSunlight", Model.Color.Number, Model.Color.Name ?? ""]</h2>
    <p class="text-secondary">@Localizer["DirectSunlightDesc"]</p>
    @{
        var sunlightGradientStops = string.Join(", ", Model.DirectSunlightVariations.Select((v, i) =>
        $"{v.Hex} {i * 100 / (Model.DirectSunlightVariations.Count - 1)}%"));
    }
    <div class="lighting-gradient-container">
        <div class="lighting-gradient" style="background: linear-gradient(to right, @sunlightGradientStops);"></div>
        <div class="lighting-labels sunlight-labels">
            @foreach (var variation in Model.DirectSunlightVariations)
            {
                <div class="lighting-label-item">
                    <svg class="sun-icon sun-icon-@variation.CssClass" viewBox="0 0 48 48" fill="none"
                        xmlns="http://www.w3.org/2000/svg">
                        <!-- Horizon arc -->
                        <path
                            d="M4 36 Q24 @(variation.Key == "Midday" ? "8" : variation.Key == "Morning" ? "24" : "24") 44 36"
                            stroke="currentColor" stroke-width="1.5" stroke-dasharray="2 2" fill="none" opacity="0.4" />
                        <!-- Horizon line -->
                        <line x1="4" y1="36" x2="44" y2="36" stroke="currentColor" stroke-width="1.5" opacity="0.6" />
                        <!-- Sun -->
                        @if (variation.Key == "Morning")
                        {
                            <circle cx="12" cy="28" r="6" fill="#F59E0B" />
                            <g stroke="#F59E0B" stroke-width="1.5">
                                <line x1="12" y1="18" x2="12" y2="14" />
                                <line x1="4" y1="28" x2="0" y2="28" />
                                <line x1="6" y1="22" x2="3" y2="19" />
                            </g>
                        }
                        else if (variation.Key == "Midday")
                        {
                            <circle cx="24" cy="16" r="7" fill="#FBBF24" />
                            <g stroke="#FBBF24" stroke-width="1.5">
                                <line x1="24" y1="5" x2="24" y2="1" />
                                <line x1="24" y1="27" x2="24" y2="31" />
                                <line x1="13" y1="16" x2="9" y2="16" />
                                <line x1="35" y1="16" x2="39" y2="16" />
                                <line x1="16" y1="8" x2="13" y2="5" />
                                <line x1="32" y1="8" x2="35" y2="5" />
                                <line x1="16" y1="24" x2="13" y2="27" />
                                <line x1="32" y1="24" x2="35" y2="27" />
                            </g>
                        }
                        else
                        {
                            <circle cx="36" cy="28" r="6" fill="#F97316" />
                            <g stroke="#F97316" stroke-width="1.5">
                                <line x1="36" y1="18" x2="36" y2="14" />
                                <line x1="44" y1="28" x2="48" y2="28" />
                                <line x1="42" y1="22" x2="45" y2="19" />
                            </g>
                        }
                    </svg>
                    <span class="lighting-time">@Localizer[$"Sunlight{variation.Key}"]</span>
                </div>
            }
        </div>
    </div>
</section>

<section class="contrast-section mt-2xl">
    <h2>@Localizer["ContrastComparison", Model.Color.Number]</h2>
    @{
        var contrastBackgrounds = new[] {
        ("#FFFFFF", "BgWhite"),
        ("#E0E0E0", "BgLightGrey"),
        ("#9E9E9E", "BgGrey"),
        ("#424242", "BgDarkGrey"),
        ("#000000", "BgBlack")
        };
    }
    <div class="contrast-strip">
        @foreach (var (bgColor, labelKey) in contrastBackgrounds)
        {
            <partial name="Shared/_ContrastSegment" model="(bgColor, Model.Color.Hex, Localizer[labelKey].Value)" />
        }
    </div>
    <div class="contrast-labels">
        @foreach (var (_, labelKey) in contrastBackgrounds)
        {
            <span>@Localizer[labelKey]</span>
        }
    </div>
</section>


<section class="color-codes-section mt-4xl">
    <h2>@Localizer["ColorCodesTitle", Model.Color.Number]</h2>
    <table class="color-details">
        <tr>
            <th scope="row">
                <svg class="table-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                    stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                    <path d="M12 2H2v10l9.29 9.29c.94.94 2.48.94 3.42 0l6.58-6.58c.94-.94.94-2.48 0-3.42L12 2Z" />
                    <path d="M7 7h.01" />
                </svg>
                @Localizer["LabelName", Model.Color.Number]
            </th>
            <td>@(string.IsNullOrEmpty(Model.Color.Name) ? "—" : Model.Color.Name)</td>
        </tr>
        <tr>
            <th scope="row">
                <svg class="table-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                    stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                    <path d="M12 2H2v10l9.29 9.29c.94.94 2.48.94 3.42 0l6.58-6.58c.94-.94.94-2.48 0-3.42L12 2Z" />
                    <path d="M7 7h.01" />
                </svg>
                @Localizer["LabelNameDe", Model.Color.Number]
            </th>
            <td>@(string.IsNullOrEmpty(Model.Color.NameDe) ? "—" : Model.Color.NameDe)</td>
        </tr>
        <tr>
            <th scope="row">
                <svg class="table-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                    stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                    <circle cx="13.5" cy="6.5" r="0.5" fill="currentColor" />
                    <circle cx="17.5" cy="10.5" r="0.5" fill="currentColor" />
                    <circle cx="8.5" cy="7.5" r="0.5" fill="currentColor" />
                    <circle cx="6.5" cy="12.5" r="0.5" fill="currentColor" />
                    <path
                        d="M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.555C21.965 6.012 17.461 2 12 2Z" />
                </svg>
                @Localizer["LabelRootColor", Model.Color.Number]
            </th>
            <td>
                @if (Model.Color.RootColor != RootColor.Unknown)
                {
                    <span class="badge badge-@Model.Color.RootColor.ToString().ToLowerInvariant()">
                        @Localizer[$"RootColor{Model.Color.RootColor}"]
                    </span>
                }
                else
                {
                    <span>—</span>
                }
            </td>
        </tr>
        <tr>
            <th scope="row">
                <svg class="table-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                    stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                    <path d="M14 4v10.54a4 4 0 1 1-4 0V4a2 2 0 0 1 4 0Z" />
                </svg>
                @Localizer["LabelUndertone", Model.Color.Number]
            </th>
            <td>
                @if (Model.Formats?.Undertone.Secondary != SecondaryUndertone.None)
                {
                    @* Has detectable undertone direction *@
                    <span class="badge badge-@Model.Formats?.Undertone.Primary.ToString().ToLowerInvariant()">
                        @Localizer[$"Undertone{Model.Formats?.Undertone.Primary}"]
                    </span>
                    <span class="text-secondary text-sm">
                        (@Localizer[$"Undertone{Model.Formats?.Undertone.Strength}"]
                        @Localizer[$"UndertoneSecondary{Model.Formats?.Undertone.Secondary}"])
                    </span>
                }
                else
                {
                    @* Truly achromatic - no undertone *@
                    <span>@Localizer["UndertoneNeutral"]</span>
                }
            </td>
        </tr>
        <tr>
            <th scope="row">
                <svg class="table-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                    stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                    <path d="M4 9V5a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v4" />
                    <path d="M4 15v4a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-4" />
                    <path d="M9 9v6" />
                    <path d="M15 9v6" />
                    <path d="M9 12h6" />
                </svg>
                @Localizer["LabelHex", Model.Color.Number]
            </th>
            <td>@Model.Color.Hex</td>
        </tr>
        <tr>
            <th scope="row">
                <svg class="table-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                    stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                    <rect width="20" height="14" x="2" y="3" rx="2" />
                    <line x1="8" x2="16" y1="21" y2="21" />
                    <line x1="12" x2="12" y1="17" y2="21" />
                </svg>
                @Localizer["LabelRgbValues", Model.Color.Number]
            </th>
            <td>
                <div class="color-value-list">
                    <span class="color-value-row"><span class="color-dot-label"><span class="color-dot"
                                style="background:#ff0000;"></span> R</span> <span>@Model.Formats?.Rgb.R</span></span>
                    <span class="color-value-row"><span class="color-dot-label"><span class="color-dot"
                                style="background:#00ff00;"></span> G</span> <span>@Model.Formats?.Rgb.G</span></span>
                    <span class="color-value-row"><span class="color-dot-label"><span class="color-dot"
                                style="background:#0000ff;"></span> B</span> <span>@Model.Formats?.Rgb.B</span></span>
                </div>
            </td>
        </tr>
        <tr>
            <th scope="row">
                <svg class="table-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                    stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                    <circle cx="12" cy="12" r="4" />
                    <path d="M12 2v2" />
                    <path d="M12 20v2" />
                    <path d="m4.93 4.93 1.41 1.41" />
                    <path d="m17.66 17.66 1.41 1.41" />
                    <path d="M2 12h2" />
                    <path d="M20 12h2" />
                    <path d="m6.34 17.66-1.41 1.41" />
                    <path d="m19.07 4.93-1.41 1.41" />
                </svg>
                @Localizer["LabelLrv", Model.Color.Number]
            </th>
            <td>
                <partial name="Shared/_LrvBar" model="new LrvBarModel(lrv)" />
            </td>
        </tr>
        <tr>
            <th scope="row">
                <svg class="table-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                    stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                    <line x1="19" x2="5" y1="5" y2="19" />
                    <circle cx="6.5" cy="6.5" r="2.5" />
                    <circle cx="17.5" cy="17.5" r="2.5" />
                </svg>
                @Localizer["LabelRgbPercent", Model.Color.Number]
            </th>
            <td>@Model.Formats?.RgbPercentString</td>
        </tr>
        <tr>
            <th scope="row">
                <svg class="table-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                    stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                    <path d="m2 22 1-1h3l9-9" />
                    <path d="M3 21v-3l9-9" />
                    <circle cx="15" cy="6" r="3" />
                    <path d="m22 2-1.5 1.5" />
                </svg>
                @Localizer["LabelHsv", Model.Color.Number]
            </th>
            <td>@Model.Formats?.HsvString</td>
        </tr>
        <tr>
            <th scope="row">
                <svg class="table-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                    stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                    <path d="m2 22 1-1h3l9-9" />
                    <path d="M3 21v-3l9-9" />
                    <circle cx="15" cy="6" r="3" />
                    <path d="m22 2-1.5 1.5" />
                </svg>
                @Localizer["PropHue"]
            </th>
            <td>
                <partial name="Shared/_HueDiagram" model="hue" />
            </td>
        </tr>
        <tr>
            <th scope="row">
                <svg class="table-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                    stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                    <path d="m2 22 1-1h3l9-9" />
                    <path d="M3 21v-3l9-9" />
                    <circle cx="15" cy="6" r="3" />
                    <path d="m22 2-1.5 1.5" />
                </svg>
                @Localizer["PropSaturation"]
            </th>
            <td>
                <partial name="Shared/_SaturationBar" model="new SaturationBarModel(hue, saturation)" />
            </td>
        </tr>
        <tr>
            <th scope="row">
                <svg class="table-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                    stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                    <path d="m2 22 1-1h3l9-9" />
                    <path d="M3 21v-3l9-9" />
                    <circle cx="15" cy="6" r="3" />
                    <path d="m22 2-1.5 1.5" />
                </svg>
                @Localizer["LabelHsl", Model.Color.Number]
            </th>
            <td>@Model.Formats?.HslString</td>
        </tr>
        <tr>
            <th scope="row">
                <svg class="table-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                    stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                    <polyline points="6 9 6 2 18 2 18 9" />
                    <path d="M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2" />
                    <rect width="12" height="8" x="6" y="14" />
                </svg>
                @Localizer["LabelCmyk", Model.Color.Number]
            </th>
            <td>
                <div class="color-value-list">
                    <span class="color-value-row"><span class="color-dot-label"><span class="color-dot"
                                style="background:#00ffff;"></span> C</span> <span>@Model.Formats?.Cmyk.C%</span></span>
                    <span class="color-value-row"><span class="color-dot-label"><span class="color-dot"
                                style="background:#ff00ff;"></span> M</span> <span>@Model.Formats?.Cmyk.M%</span></span>
                    <span class="color-value-row"><span class="color-dot-label"><span class="color-dot"
                                style="background:#ffff00;"></span> Y</span> <span>@Model.Formats?.Cmyk.Y%</span></span>
                    <span class="color-value-row"><span class="color-dot-label"><span class="color-dot"
                                style="background:#000000;"></span> K</span> <span>@Model.Formats?.Cmyk.K%</span></span>
                </div>
            </td>
        </tr>
        <tr>
            <th scope="row">
                <svg class="table-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                    stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                    <rect width="20" height="15" x="2" y="7" rx="2" ry="2" />
                    <polyline points="17 2 12 7 7 2" />
                </svg>
                @Localizer["LabelYiq", Model.Color.Number]
            </th>
            <td>@Model.Formats?.YiqString</td>
        </tr>
        <tr>
            <th scope="row">
                <svg class="table-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                    stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                    <path d="M12 3v18" />
                    <path d="M3 12h18" />
                    <path d="m4 4 16 16" />
                </svg>
                @Localizer["LabelXyz", Model.Color.Number]
            </th>
            <td>@Model.Formats?.XyzString</td>
        </tr>
        <tr>
            <th scope="row">
                <svg class="table-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                    stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                    <path d="M4.5 3h15" />
                    <path d="M6 3v16a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V3" />
                    <path d="M6 14h12" />
                </svg>
                CIE L*
            </th>
            <td>
                <partial name="Shared/_CieLabBar" model="@(new CieLabComponentModel("L", Model.Formats?.Lab.L ?? 0))" />
            </td>
        </tr>
        <tr>
            <th scope="row">
                <svg class="table-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                    stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                    <path d="M4.5 3h15" />
                    <path d="M6 3v16a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V3" />
                    <path d="M6 14h12" />
                </svg>
                CIE a*
            </th>
            <td>
                <partial name="Shared/_CieLabBar" model="@(new CieLabComponentModel("a", Model.Formats?.Lab.a ?? 0))" />
            </td>
        </tr>
        <tr>
            <th scope="row">
                <svg class="table-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                    stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                    <path d="M4.5 3h15" />
                    <path d="M6 3v16a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V3" />
                    <path d="M6 14h12" />
                </svg>
                CIE b*
            </th>
            <td>
                <partial name="Shared/_CieLabBar" model="@(new CieLabComponentModel("b", Model.Formats?.Lab.b ?? 0))" />
            </td>
        </tr>
        <tr>
            <th scope="row">
                <svg class="table-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                    stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                    <path d="M4.5 3h15" />
                    <path d="M6 3v16a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V3" />
                    <path d="M6 14h12" />
                </svg>
                @Localizer["LabelCieLab", Model.Color.Number]
            </th>
            <td>@Model.Formats?.LabString</td>
        </tr>
        <tr>
            <th scope="row">
                <svg class="table-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                    stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                    <path d="M4.5 3h15" />
                    <path d="M6 3v16a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V3" />
                    <path d="M6 14h12" />
                </svg>
                @Localizer["LabelCieLuv", Model.Color.Number]
            </th>
            <td>@Model.Formats?.LuvString</td>
        </tr>
        <tr>
            <th scope="row">
                <svg class="table-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                    stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                    <rect x="14" y="14" width="4" height="6" rx="2" />
                    <rect x="6" y="4" width="4" height="16" rx="2" />
                    <path d="M6 4h4" />
                    <path d="M14 10h4" />
                </svg>
                @Localizer["LabelDecimal", Model.Color.Number]
            </th>
            <td>@Model.Formats?.Decimal</td>
        </tr>
        <tr>
            <th scope="row">
                <svg class="table-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                    stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                    <path d="M4.5 3h15" />
                    <path d="M6 3v16a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V3" />
                    <path d="M6 14h12" />
                </svg>
                @Localizer["LabelHunterLab", Model.Color.Number]
            </th>
            <td>@Model.Formats?.HunterLabString</td>
        </tr>
    </table>
</section>


@if (Model.SameRootColors.Any())
{
    <section class="compare-links mt-4xl">
        <h2>@Localizer["CompareWith", Model.Color.Number, Model.Color.Name ?? ""]</h2>
        <div class="compare-links-list">
            @foreach (var color in Model.SameRootColors)
            {
                <a asp-page="/ral-colors/Versus" asp-route-culture="@currentCulture"
                    asp-route-slug="@Model.Color.Slug-vs-@color.Slug" class="compare-link-inline">
                    <span class="compare-link-swatches-inline">
                        <span style="background-color: @Model.Color.Hex;"></span>
                        <span style="background-color: @color.Hex;"></span>
                    </span>
                    <span>RAL @Model.Color.Number vs @color.Number</span>
                </a>
            }
        </div>
    </section>
}

@if (Model.SimilarColors.Any())
{
    <section class="similar-colors mt-4xl">
        <h2>@Localizer["SimilarColors", Model.Color.Number]</h2>
        <div class="similar-grid">
            @foreach (var similar in Model.SimilarColors)
            {
                <partial name="_ColorTile" model="similar.Color" />
            }
        </div>
    </section>
}

@* FAQ Section *@
@{
    var faqColorName = Model.Color.GetLocalizedName(currentCulture);
    var faqRootColorName = Model.Color.RootColor.ToString().ToLower();
    var faqCategoryName = Model.Color.Category.ToString();
    var faqLrvValue = Model.Formats?.Lrv ?? 0;
    var faqLrvLevel = ColorMath.ClassifyLrv(faqLrvValue);
    var faqTempKelvin = Model.Temperature.Kelvin;
    var faqUndertone = Model.Formats?.Undertone;
    var faqIsWarm = faqUndertone?.Primary == PrimaryUndertone.Warm;
    var faqIsCool = faqUndertone?.Primary == PrimaryUndertone.Cool;
    var faqUndertoneDesc = Model.Formats?.UndertoneDescription ?? "";
    var faqIsNeutralFamily = Model.Color.RootColor is RootColor.Grey or RootColor.White or RootColor.Black or
    RootColor.Beige;
}
<section class="faq-section mt-4xl">
    <h2>@Localizer["FaqTitle"]</h2>
    <div class="faq-list" itemscope itemtype="https://schema.org/FAQPage">

        @* FAQ 1: What color is this? (ALWAYS shown) *@
        <div class="faq-item" itemscope itemprop="mainEntity" itemtype="https://schema.org/Question">
            <h3 itemprop="name">@Localizer["FaqWhatColor", Model.Color.Number]</h3>
            <div itemscope itemprop="acceptedAnswer" itemtype="https://schema.org/Answer">
                <p itemprop="text">@Localizer["FaqWhatColorAnswer", Model.Color.Number, faqColorName, faqRootColorName,
                                        faqCategoryName, faqLrvValue, faqTempKelvin]</p>
            </div>
        </div>

        @* FAQ 2: What is <name> in RAL? (only if has name) *@
        @if (!string.IsNullOrEmpty(faqColorName))
        {
            <div class="faq-item" itemscope itemprop="mainEntity" itemtype="https://schema.org/Question">
                <h3 itemprop="name">@Localizer["FaqWhatIsNameInRal", faqColorName]</h3>
                <div itemscope itemprop="acceptedAnswer" itemtype="https://schema.org/Answer">
                    <p itemprop="text">@Localizer["FaqWhatIsNameInRalAnswer", faqColorName, Model.Color.Number,
                                            faqCategoryName]</p>
            </div>
        </div>
                }

        @* FAQ 3: Warm or cool? (only if not neutral) *@
        @if (faqIsWarm || faqIsCool)
        {
            <div class="faq-item" itemscope itemprop="mainEntity" itemtype="https://schema.org/Question">
                <h3 itemprop="name">@Localizer["FaqWarmCool", Model.Color.Number]</h3>
                <div itemscope itemprop="acceptedAnswer" itemtype="https://schema.org/Answer">
                    <p itemprop="text">
                        @if (faqIsWarm)
                        {
                            @Localizer["FaqWarmAnswer", Model.Color.Number, faqColorName, faqTempKelvin, faqUndertoneDesc]
                        }
                        else
                        {
                            @Localizer["FaqCoolAnswer", Model.Color.Number, faqColorName, faqTempKelvin, faqUndertoneDesc]
                        }
                    </p>
                </div>
            </div>
        }

        @* FAQ 4: Light or dark? (for neutrals) *@
        @if (faqIsNeutralFamily)
        {
            <div class="faq-item" itemscope itemprop="mainEntity" itemtype="https://schema.org/Question">
                <h3 itemprop="name">@Localizer["FaqLightDark", Model.Color.Number]</h3>
                <div itemscope itemprop="acceptedAnswer" itemtype="https://schema.org/Answer">
                    <p itemprop="text">@Localizer["FaqLightDarkAnswer", Model.Color.Number, faqLrvValue,
                                            Localizer[$"Lrv{faqLrvLevel}"].Value]</p>
            </div>
        </div>
                }

        @* FAQ 5: Similar colors (if any exist) *@
        @if (Model.SimilarColors?.Count > 0)
        {
            var topSimilar = Model.SimilarColors.Take(4)
            .Select(c => $"RAL {c.Color.Number} {c.Color.GetLocalizedName(currentCulture)}");
            <div class="faq-item" itemscope itemprop="mainEntity" itemtype="https://schema.org/Question">
                <h3 itemprop="name">@Localizer["FaqSimilar", Model.Color.Number]</h3>
                <div itemscope itemprop="acceptedAnswer" itemtype="https://schema.org/Answer">
                    <p itemprop="text">@Localizer["FaqSimilarAnswer", faqColorName, string.Join(", ", topSimilar)]</p>
                </div>
            </div>
        }
    </div>
</section>

<section class="learn-metrics-section mt-4xl">
    <h2>@Localizer["LearnMetrics"]</h2>
    <p class="text-secondary">@Localizer["LearnMetricsIntro"]</p>
    <div class="learn-metrics-content">
        <div class="metric-definition">
            <h3>@Localizer["LearnHue"]</h3>
            <p>@Localizer["LearnHueDesc"]</p>
        </div>
        <div class="metric-definition">
            <h3>@Localizer["LearnSaturation"]</h3>
            <p>@Localizer["LearnSaturationDesc"]</p>
        </div>
        <div class="metric-definition">
            <h3>@Localizer["LearnLrv"]</h3>
            <p>@Localizer["LearnLrvDesc"]</p>
        </div>
        <div class="metric-definition">
            <h3>@Localizer["LearnTemperature"]</h3>
            <p>@Localizer["LearnTemperatureDesc"]</p>
        </div>
        <div class="metric-definition">
            <h3>@Localizer["LearnUndertone"]</h3>
            <p>@Localizer["LearnUndertoneDesc"]</p>
        </div>
    </div>
</section>

<section class="color-share-section mt-2xl">
    <h2>@Localizer["ColorImageTitle", Model.Color.Number]</h2>
    <figure class="color-share-image">
        <img src="/images/ral-colors/@(Model.Color.Slug).jpg"
            alt="@(string.IsNullOrEmpty(Model.Color.Name)
                                                                                                            ? Localizer["ImageAltBasic", Model.Color.Number, Model.Color.Hex].Value
                                                                                                            : Localizer["ImageAltWithName", Model.Color.Number, Model.Color.Name, Model.Color.Hex].Value)"
            width="1200" height="630" loading="lazy" />
        <figcaption>
            <button class="btn btn-sm btn-secondary copy-url-btn"
                data-url="@baseUrl/images/ral-colors/@(Model.Color.Slug).jpg"
                data-copied-text="@Localizer["CopiedToClipboard"]" onclick="DetailsPage.copyImageUrl(this)">
                @Localizer["CopyImageUrl"]
            </button>
        </figcaption>
    </figure>
</section>


<a asp-page="/ral-colors/Index" class="btn btn-ghost mt-xl" asp-route-culture="@RouteData.Values["culture"]">
    &larr; @Localizer["BackToColors"]
</a>

@section Scripts {
    <script src="~/js/details-page.js" asp-append-version="true" defer></script>
}

<!-- Full-page color preview modal -->
<div id="colorPreview" class="color-preview-overlay" style="background-color: #FFFFFF;" role="dialog" aria-modal="true"
    aria-labelledby="colorPreviewTitle" aria-describedby="colorPreviewDesc"
    onclick="DetailsPage.closeColorPreview(event)">
    <h2 id="colorPreviewTitle" class="visually-hidden">@Localizer["ColorPreviewTitle"]</h2>
    <p id="colorPreviewDesc" class="visually-hidden">RAL @Model.Color.Number @(Model.Color.Name ?? "")</p>
    <button class="color-preview-close" onclick="DetailsPage.closeColorPreview(event)"
        aria-label="@Localizer["Close"]">&times;</button>
    <div class="color-preview-content">
        <div class="color-preview-swatch" style="background-color: @Model.Color.Hex;"></div>
    </div>
    <div class="color-preview-controls">
        <button class="bg-option active" data-bg="#FFFFFF" onclick="DetailsPage.changePreviewBg('#FFFFFF', this)">
            <span class="bg-option-swatch" style="background-color: #FFFFFF;"><span
                    style="background-color: @Model.Color.Hex;"></span></span>
            <span class="bg-option-label">@Localizer["BgWhite"]</span>
        </button>
        <button class="bg-option" data-bg="#E0E0E0" onclick="DetailsPage.changePreviewBg('#E0E0E0', this)">
            <span class="bg-option-swatch" style="background-color: #E0E0E0;"><span
                    style="background-color: @Model.Color.Hex;"></span></span>
            <span class="bg-option-label">@Localizer["BgLightGrey"]</span>
        </button>
        <button class="bg-option" data-bg="#9E9E9E" onclick="DetailsPage.changePreviewBg('#9E9E9E', this)">
            <span class="bg-option-swatch" style="background-color: #9E9E9E;"><span
                    style="background-color: @Model.Color.Hex;"></span></span>
            <span class="bg-option-label">@Localizer["BgGrey"]</span>
        </button>
        <button class="bg-option" data-bg="#424242" onclick="DetailsPage.changePreviewBg('#424242', this)">
            <span class="bg-option-swatch" style="background-color: #424242;"><span
                    style="background-color: @Model.Color.Hex;"></span></span>
            <span class="bg-option-label">@Localizer["BgDarkGrey"]</span>
        </button>
        <button class="bg-option" data-bg="#000000" onclick="DetailsPage.changePreviewBg('#000000', this)">
            <span class="bg-option-swatch" style="background-color: #000000;"><span
                    style="background-color: @Model.Color.Hex;"></span></span>
            <span class="bg-option-label">@Localizer["BgBlack"]</span>
        </button>
    </div>
    <!-- Fullscreen mode: color fills entire overlay -->
    <div class="color-preview-fullscreen" style="background-color: @Model.Color.Hex;"></div>
</div>